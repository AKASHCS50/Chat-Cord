{% extends 'layout.html' %}

{% block styles %}

{% endblock styles %}

{% block body %}

		<div class="join-container">
			<header class="join-header">
				<h1><i class="fas fa-smile"></i> Flack</h1>
			</header>
			<main class="join-main">
				<form action="{{ url_for('chat') }}" method="post">
					<div class="form-control">
						<label for="username">Username</label>
						<input
							type="text"
							name="username"
							id="username"
							placeholder="Enter username..."
							required
						/>
					</div>
					<div class="form-control">
						<label for="room">Room</label>
						<select name="room" id="room">
						{% for r in rooms %}
							<option value="{{ r }}">{{ r }}</option>
						{% endfor %}
						</select>
					</div>
					<button type="submit" name="submitbutton" id="joinchat" value="joinchat" class="btn">Join Chat</button>

				<div class="form-control search">
				 <input type="text" id="addRoom" name="addroom" placeholder="Create New Room">
					<button type="submit" name="submitbutton" id="newroom" value="newroom" class="newRoomButton">
						<i class="fa fa-plus"></i>
					</button>
				</div>
				</form>

			</main>
		</div>


{% endblock body %}


{% block javascript %}

	<script>

		const username = localStorage.getItem('username');
		
		if(username)
		{
			document.getElementById('username').value = username;
		}

		const room = localStorage.getItem('room');
		
		if(username && room)
		{
			document.getElementById('room').value = room;
			
			document.getElementById('joinchat').click();
		}	
		

	</script>

{% endblock javascript %}